{
	"info": {
		"_postman_id": "volcanion-auth-2025",
		"name": "Volcanion Auth Service - Complete API Collection",
		"description": "# Volcanion Auth Service API\n\nComprehensive API collection for authentication and authorization with RBAC + PBAC support.\n\n## Features\n- ✅ JWT Authentication\n- ✅ User Registration & Login\n- ✅ Role-Based Access Control (RBAC)\n- ✅ Policy-Based Access Control (PBAC)\n- ✅ Permission Management\n- ✅ User Profile Management\n\n## Quick Start\n1. Set environment to **Local** or **Production**\n2. Run **Register User** request\n3. Run **Login** request (token auto-saved)\n4. All other requests will use the token automatically\n\n## Version\n1.0.0 - December 2025\n\n## Author\nVolcanion Company",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:5000",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "refreshToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "roleId",
      "value": "",
      "type": "string"
    },
    {
      "key": "permissionId",
      "value": "",
      "type": "string"
    },
    {
      "key": "policyId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('userId', response.userId);",
                  "    pm.environment.set('userId', response.userId);",
                  "    console.log('User registered successfully. UserId:', response.userId);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"SecurePassword123!\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            },
            "description": "Register a new user account.\n\n**Request Body:**\n- email (required): Valid email address\n- password (required): Min 8 chars, must contain uppercase, lowercase, number, special char\n- firstName (required): User's first name\n- lastName (required): User's last name\n\n**Response:**\n- 201 Created: User registered successfully\n- 400 Bad Request: Validation failed or email already exists"
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    pm.environment.set('accessToken', response.accessToken);",
                  "    pm.environment.set('refreshToken', response.refreshToken);",
                  "    console.log('Login successful. Token saved.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"SecurePassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            },
            "description": "Authenticate user and receive JWT tokens.\n\n**Request Body:**\n- email (required): User's email\n- password (required): User's password\n\n**Response:**\n- 200 OK: Returns accessToken, refreshToken, expiresIn, tokenType\n- 401 Unauthorized: Invalid credentials\n- 403 Forbidden: Account is inactive"
          },
          "response": []
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('accessToken', response.accessToken);",
                  "    pm.collectionVariables.set('refreshToken', response.refreshToken);",
                  "    pm.environment.set('accessToken', response.accessToken);",
                  "    pm.environment.set('refreshToken', response.refreshToken);",
                  "    console.log('Token refreshed successfully.');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/refresh",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "refresh"
              ]
            },
            "description": "Get new access token using refresh token.\n\n**Request Body:**\n- refreshToken (required): Valid refresh token from login\n\n**Response:**\n- 200 OK: Returns new accessToken and refreshToken\n- 401 Unauthorized: Invalid or expired refresh token"
          },
          "response": []
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/auth/logout",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "logout"
              ]
            },
            "description": "Revoke refresh token and logout user.\n\n**Request Body:**\n- refreshToken (required): Refresh token to revoke\n\n**Response:**\n- 204 No Content: Logout successful\n- 401 Unauthorized: Invalid or missing access token"
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints for user registration, login, token refresh, and logout."
    },
    {
      "name": "Permissions",
      "item": [
        {
          "name": "Create Permission",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('permissionId', response.id);",
                  "    pm.environment.set('permissionId', response.id);",
                  "    console.log('Permission created. ID:', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resource\": \"documents\",\n  \"action\": \"read\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/permissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "permissions"
              ]
            },
            "description": "Create a new permission.\n\n**Request Body:**\n- resource (required): Resource name (e.g., 'documents', 'users')\n- action (required): Action name (e.g., 'read', 'write', 'delete')\n\n**Response:**\n- 201 Created: Permission created successfully\n- 400 Bad Request: Validation failed or permission already exists"
          },
          "response": []
        },
        {
          "name": "Get All Permissions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/permissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "permissions"
              ]
            },
            "description": "Get list of all permissions.\n\n**Response:**\n- 200 OK: Returns array of permissions with total count"
          },
          "response": []
        },
        {
          "name": "Get Permission by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/permissions/{{permissionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "permissions",
                "{{permissionId}}"
              ]
            },
            "description": "Get permission details by ID.\n\n**Response:**\n- 200 OK: Returns permission details\n- 404 Not Found: Permission not found"
          },
          "response": []
        },
        {
          "name": "Delete Permission",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/permissions/{{permissionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "permissions",
                "{{permissionId}}"
              ]
            },
            "description": "Delete a permission.\n\n**Response:**\n- 204 No Content: Permission deleted successfully\n- 404 Not Found: Permission not found\n- 409 Conflict: Permission is in use by roles"
          },
          "response": []
        }
      ],
      "description": "Permission management endpoints (RBAC resources and actions)."
    },
    {
      "name": "Roles",
      "item": [
        {
          "name": "Create Role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('roleId', response.id);",
                  "    pm.environment.set('roleId', response.id);",
                  "    console.log('Role created. ID:', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"ContentEditor\",\n  \"description\": \"Can create and edit documents\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "roles"
              ]
            },
            "description": "Create a new role.\n\n**Request Body:**\n- name (required): Unique role name\n- description (optional): Role description\n\n**Response:**\n- 201 Created: Role created successfully\n- 400 Bad Request: Validation failed or role name already exists"
          },
          "response": []
        },
        {
          "name": "Get All Roles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/roles?includeInactive=false",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "roles"
              ],
              "query": [
                {
                  "key": "includeInactive",
                  "value": "false",
                  "description": "Include inactive roles"
                }
              ]
            },
            "description": "Get list of all roles.\n\n**Query Parameters:**\n- includeInactive (optional): Include inactive roles (default: false)\n\n**Response:**\n- 200 OK: Returns array of roles with total count"
          },
          "response": []
        },
        {
          "name": "Get Role by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Get role details by ID including assigned permissions.\n\n**Response:**\n- 200 OK: Returns role details with permissions\n- 404 Not Found: Role not found"
          },
          "response": []
        },
        {
          "name": "Update Role",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"ContentEditor\",\n  \"description\": \"Updated: Can create, edit and publish documents\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Update role details.\n\n**Request Body:**\n- name (optional): Updated role name\n- description (optional): Updated description\n\n**Response:**\n- 200 OK: Role updated successfully\n- 404 Not Found: Role not found\n- 400 Bad Request: Validation failed"
          },
          "response": []
        },
        {
          "name": "Delete Role",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Delete a role (soft delete).\n\n**Response:**\n- 204 No Content: Role deleted successfully\n- 404 Not Found: Role not found\n- 409 Conflict: Role is assigned to users"
          },
          "response": []
        },
        {
          "name": "Assign Permission to Role",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/roles/{{roleId}}/permissions/{{permissionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "roles",
                "{{roleId}}",
                "permissions",
                "{{permissionId}}"
              ]
            },
            "description": "Assign a permission to a role.\n\n**Path Parameters:**\n- roleId: Target role ID\n- permissionId: Permission to assign\n\n**Response:**\n- 204 No Content: Permission assigned successfully\n- 404 Not Found: Role or Permission not found\n- 409 Conflict: Permission already assigned to role"
          },
          "response": []
        },
        {
          "name": "Remove Permission from Role",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/roles/{{roleId}}/permissions/{{permissionId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "roles",
                "{{roleId}}",
                "permissions",
                "{{permissionId}}"
              ]
            },
            "description": "Remove a permission from a role.\n\n**Path Parameters:**\n- roleId: Target role ID\n- permissionId: Permission to remove\n\n**Response:**\n- 204 No Content: Permission removed successfully\n- 404 Not Found: Role or Permission not found"
          },
          "response": []
        }
      ],
      "description": "Role management endpoints including role-permission assignments."
    },
    {
      "name": "User-Role Management",
      "item": [
        {
          "name": "Assign Role to User",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/users/{{userId}}/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "users",
                "{{userId}}",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Assign a role to a user.\n\n**Path Parameters:**\n- userId: Target user ID\n- roleId: Role to assign\n\n**Response:**\n- 204 No Content: Role assigned successfully\n- 404 Not Found: User or Role not found\n- 409 Conflict: Role already assigned to user"
          },
          "response": []
        },
        {
          "name": "Remove Role from User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/users/{{userId}}/roles/{{roleId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "users",
                "{{userId}}",
                "roles",
                "{{roleId}}"
              ]
            },
            "description": "Remove a role from a user.\n\n**Path Parameters:**\n- userId: Target user ID\n- roleId: Role to remove\n\n**Response:**\n- 204 No Content: Role removed successfully\n- 404 Not Found: User or Role not found"
          },
          "response": []
        },
        {
          "name": "Get User Roles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/users/{{userId}}/roles",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "users",
                "{{userId}}",
                "roles"
              ]
            },
            "description": "Get all roles assigned to a user.\n\n**Response:**\n- 200 OK: Returns array of roles with assignment dates\n- 404 Not Found: User not found"
          },
          "response": []
        },
        {
          "name": "Get User Permissions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/users/{{userId}}/permissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "users",
                "{{userId}}",
                "permissions"
              ]
            },
            "description": "Get all permissions for a user (inherited from roles).\n\n**Response:**\n- 200 OK: Returns array of permissions with source (which role granted it)\n- 404 Not Found: User not found"
          },
          "response": []
        }
      ],
      "description": "User-role assignment and permission management."
    },
    {
      "name": "Policies",
      "item": [
        {
          "name": "Create Policy - Ownership",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('policyId', response.id);",
                  "    pm.environment.set('policyId', response.id);",
                  "    console.log('Policy created. ID:', response.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"CanEditOwnDocument\",\n  \"resource\": \"documents\",\n  \"action\": \"edit\",\n  \"effect\": \"Allow\",\n  \"priority\": 100,\n  \"conditions\": {\n    \"ownerId\": \"{userId}\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies"
              ]
            },
            "description": "Create an ownership-based policy. Users can only edit their own documents.\n\n**Condition:** ownerId in context must match userId"
          },
          "response": []
        },
        {
          "name": "Create Policy - Time-based",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"BusinessHoursAccess\",\n  \"resource\": \"api\",\n  \"action\": \"access\",\n  \"effect\": \"Allow\",\n  \"priority\": 50,\n  \"conditions\": {\n    \"$timeRange\": {\n      \"start\": \"09:00\",\n      \"end\": \"18:00\",\n      \"timezone\": \"Asia/Ho_Chi_Minh\"\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies"
              ]
            },
            "description": "Create a time-based policy. Access only allowed during business hours (9 AM - 6 PM).\n\n**Condition:** Current time must be within specified range"
          },
          "response": []
        },
        {
          "name": "Create Policy - Conditional (Manager)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"CanApproveIfManager\",\n  \"resource\": \"documents\",\n  \"action\": \"approve\",\n  \"effect\": \"Allow\",\n  \"priority\": 150,\n  \"conditions\": {\n    \"$and\": [\n      { \"userRole.contains\": \"Manager\" },\n      { \"documentStatus\": \"Pending\" }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies"
              ]
            },
            "description": "Create a conditional policy. Only managers can approve pending documents.\n\n**Conditions:**\n- User must have 'Manager' role\n- Document status must be 'Pending'"
          },
          "response": []
        },
        {
          "name": "Create Policy - DENY Policy",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"DenyContractorConfidential\",\n  \"resource\": \"documents\",\n  \"action\": \"view\",\n  \"effect\": \"Deny\",\n  \"priority\": 300,\n  \"conditions\": {\n    \"$and\": [\n      { \"userType\": \"Contractor\" },\n      { \"classification\": \"Confidential\" }\n    ]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies"
              ]
            },
            "description": "Create a DENY policy (highest priority). Contractors cannot view confidential documents.\n\n**Effect:** Deny (overrides all Allow policies)\n**Priority:** 300 (very high - evaluated first)\n\n**Conditions:**\n- User type is 'Contractor'\n- Document classification is 'Confidential'"
          },
          "response": []
        },
        {
          "name": "Get All Policies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies?includeInactive=false",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies"
              ],
              "query": [
                {
                  "key": "includeInactive",
                  "value": "false",
                  "description": "Include inactive policies"
                },
                {
                  "key": "resource",
                  "value": "documents",
                  "description": "Filter by resource",
                  "disabled": true
                },
                {
                  "key": "action",
                  "value": "edit",
                  "description": "Filter by action",
                  "disabled": true
                }
              ]
            },
            "description": "Get list of all policies.\n\n**Query Parameters:**\n- includeInactive (optional): Include inactive policies\n- resource (optional): Filter by resource\n- action (optional): Filter by action\n\n**Response:**\n- 200 OK: Returns array of policies with total count"
          },
          "response": []
        },
        {
          "name": "Get Policy by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies/{{policyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies",
                "{{policyId}}"
              ]
            },
            "description": "Get policy details by ID including conditions.\n\n**Response:**\n- 200 OK: Returns policy details\n- 404 Not Found: Policy not found"
          },
          "response": []
        },
        {
          "name": "Update Policy",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"CanEditOwnDocument\",\n  \"resource\": \"documents\",\n  \"action\": \"edit\",\n  \"effect\": \"Allow\",\n  \"priority\": 150,\n  \"conditions\": {\n    \"ownerId\": \"{userId}\",\n    \"status.in\": [\"Draft\", \"InReview\"]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies/{{policyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies",
                "{{policyId}}"
              ]
            },
            "description": "Update policy details and conditions.\n\n**Request Body:** Complete policy object with updated values\n\n**Response:**\n- 200 OK: Policy updated successfully\n- 404 Not Found: Policy not found\n- 400 Bad Request: Validation failed"
          },
          "response": []
        },
        {
          "name": "Delete Policy",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/policies/{{policyId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "policies",
                "{{policyId}}"
              ]
            },
            "description": "Delete a policy (soft delete - deactivates policy).\n\n**Response:**\n- 204 No Content: Policy deleted successfully\n- 404 Not Found: Policy not found"
          },
          "response": []
        }
      ],
      "description": "Policy management endpoints (PBAC - Policy-Based Access Control)."
    },
    {
      "name": "Authorization Check",
      "item": [
        {
          "name": "Check Authorization - With Context",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"resource\": \"documents\",\n  \"action\": \"edit\",\n  \"context\": {\n    \"ownerId\": \"{{userId}}\",\n    \"classification\": \"Public\",\n    \"status\": \"Draft\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/check",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "check"
              ]
            },
            "description": "Check authorization with context (RBAC + PBAC combined).\n\n**Request Body:**\n- userId: User to check\n- resource: Resource being accessed\n- action: Action being performed\n- context: Additional context for policy evaluation\n\n**Authorization Flow:**\n1. Evaluate policies with context (by priority)\n2. If DENY policy matches → Deny\n3. If ALLOW policy matches → Allow\n4. If no policy matches → Check RBAC permissions\n5. If has permission → Allow\n6. Otherwise → Deny\n\n**Response:**\n- isAllowed: true/false\n- reason: Explanation\n- authorizationType: 'Policy' or 'Permission' or 'None'"
          },
          "response": []
        },
        {
          "name": "Check Authorization - Without Context (RBAC only)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{userId}}\",\n  \"resource\": \"documents\",\n  \"action\": \"read\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/authorization/check",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "authorization",
                "check"
              ]
            },
            "description": "Check authorization without context (RBAC only).\n\nWhen no context is provided, only permission-based (RBAC) check is performed.\n\n**Response:**\n- authorizationType will be 'Permission' or 'None'"
          },
          "response": []
        }
      ],
      "description": "Combined authorization check (RBAC + PBAC)."
    },
    {
      "name": "User Profile",
      "item": [
        {
          "name": "Get Current User (Extension Methods)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/me",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "me"
              ]
            },
            "description": "Get current user info using extension methods.\n\n**Response:**\n- userId, email, roles\n- source: 'Extension Methods'"
          },
          "response": []
        },
        {
          "name": "Get User Context (HttpContext)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/context",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "context"
              ]
            },
            "description": "Get current user info using HttpContext extensions.\n\n**Response:**\n- userId, email, roles, requestId\n- source: 'HttpContext Extensions'"
          },
          "response": []
        },
        {
          "name": "Get User Info (Attribute Injection)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/info",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "info"
              ]
            },
            "description": "Get current user info using CurrentUser attribute injection.\n\n**Response:**\n- userId, email, roles\n- source: 'CurrentUser Attribute'"
          },
          "response": []
        },
        {
          "name": "Get User Permissions (IUserContextService)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/permissions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "permissions"
              ]
            },
            "description": "Get current user permissions using IUserContextService.\n\n**Response:**\n- userId, email, roles, permissions\n- source: 'IUserContextService'"
          },
          "response": []
        },
        {
          "name": "Set Custom Context Data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"key\": \"preferredLanguage\",\n  \"value\": \"en-US\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/context/custom",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "context",
                "custom"
              ]
            },
            "description": "Store custom data in user context for current request.\n\n**Request Body:**\n- key: Custom data key\n- value: Any value (string, number, object, array)\n\n**Note:** Data is scoped to current HTTP request only"
          },
          "response": []
        },
        {
          "name": "Get Custom Context Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/context/custom/preferredLanguage",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "context",
                "custom",
                "preferredLanguage"
              ]
            },
            "description": "Retrieve custom data from user context.\n\n**Response:**\n- 200 OK: Returns key and value\n- 404 Not Found: Key not found in context"
          },
          "response": []
        },
        {
          "name": "Check Permission",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/check/permission/documents:read",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "check",
                "permission",
                "documents:read"
              ]
            },
            "description": "Check if current user has specific permission.\n\n**Path Parameter:**\n- permission: Permission string (format: resource:action)\n\n**Response:**\n- permission: The checked permission\n- hasPermission: true/false"
          },
          "response": []
        },
        {
          "name": "Check Role",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v1/userprofile/check/role/Admin",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "v1",
                "userprofile",
                "check",
                "role",
                "Admin"
              ]
            },
            "description": "Check if current user has specific role.\n\n**Path Parameter:**\n- role: Role name to check\n\n**Response:**\n- role: The checked role\n- hasRole: true/false"
          },
          "response": []
        }
      ],
      "description": "User profile endpoints demonstrating different methods to access user context."
    },
    {
      "name": "Health Check",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Check overall system health.\n\n**Response:**\n- 200 OK: System is healthy\n- 503 Service Unavailable: System is unhealthy"
          },
          "response": []
        },
        {
          "name": "Readiness Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/ready",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health",
                "ready"
              ]
            },
            "description": "Check if system is ready to accept requests."
          },
          "response": []
        },
        {
          "name": "Liveness Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health/live",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health",
                "live"
              ]
            },
            "description": "Check if system is alive (basic health check)."
          },
          "response": []
        }
      ],
      "description": "Health check endpoints for monitoring."
    }
  ]
}
